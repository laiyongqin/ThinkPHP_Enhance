!function(e){var r=window.Think;r||e.error("ThinkPHP基础配置没有正确加载！"),r.parse_url=function(r){var t=r.match(/^(?:([a-z]+):\/\/)?([\w-]+(?:\.[\w-]+)+)?(?::(\d+))?([\w-\/]+)?(?:\?((?:\w+=[^#&=\/]*)?(?:&\w+=[^#&=\/]*)*))?(?:#([\w-]+))?$/i);return t||e.error("url格式不正确！"),{scheme:t[1],host:t[2],port:t[3],path:t[4],query:t[5],fragment:t[6]}},r.parse_str=function(e){for(var r,t=e.split("&"),s={},i=0;i<t.length;i++)r=t[i].split("="),s[r[0]]=r[1];return s},r.parse_name=function(e,r){return r?(e.replace(/_([a-z])/g,function(e,r){return r.toUpperCase()}),e.replace(/[a-z]/,function(e){return e.toUpperCase()})):(e=e.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()}),0===e.indexOf("_")&&(e=e.substr(1))),e},r.U=function(r,t,s){var i=this.parse_url(r),a=[],n={};return i.path||e.error("url格式错误！"),r=i.path,0===r.indexOf("/")?(0==this.MODEL[0]&&e.error("该URL模式不支持使用路由!("+r+")"),"/"==r.substr(-1)&&(r=r.substr(0,r.length-1)),r="/"==this.DEEP?r.substr(1):r.substr(1).replace(/\//g,this.DEEP),r="/"+r):(a=r.split("/"),a=[a.pop(),a.pop(),a.pop()].reverse(),a[1]||e.error("ThinkPHP.U("+r+")没有指定控制器"),a[0]&&(n[this.VAR[0]]=this.MODEL[1]?a[0].toLowerCase():a[0]),n[this.VAR[1]]=this.MODEL[1]?this.parse_name(a[1]):a[1],n[this.VAR[2]]=this.MODEL[1]?a[2].toLowerCase():a[2],r="?"+e.param(n)),"string"==typeof t&&(t=this.parse_str(t)),i.query&&e.extend(t,this.parse_str(i.query)),e.isPlainObject(t)&&(r+="&"+e.param(t)),0!=this.MODEL[0]&&(r=r.replace("?"+(a[0]?this.VAR[0]:this.VAR[1])+"=","/").replace("&"+this.VAR[1]+"=",this.DEEP).replace("&"+this.VAR[2]+"=",this.DEEP).replace(/(\w+=&)|(&?\w+=$)/g,"").replace(/[&=]/g,this.DEEP),!1!==s&&(s=s||this.MODEL[2].split("|")[0],s&&(r+="."+s))),r=this.APP+r},r.setValue=function(r,t){var s,i,a=r.substr(0,1),n=0;if(""!==t)if(s=e("#"===a||"."===a?r:"[name='"+r+"']"),s.eq(0).is(":radio"))s.filter("[value='"+t+"']").each(function(){this.checked=!0});else if(s.eq(0).is(":checkbox"))for(e.isArray(t)?i=t:(i=new Array,i[0]=t),n=0,len=i.length;n<len;n++)s.filter("[value='"+i[n]+"']").each(function(){this.checked=!0});else s.val(t)}}(jQuery);